<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0"/>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Draw Together - For My Love</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Mobile-specific draw styles */
    @media (max-width: 480px) {
      .draw-container {
        width: 100%;
        max-width: 580px;
      }
      
      .canvas-container {
        margin: 20px 0;
        border-radius: 16px;
      }
      
      #drawingCanvas {
        border-radius: 16px;
      }
      
      .draw-controls {
        gap: 16px;
        margin-top: 16px;
      }
      
      .color-picker {
        gap: 9px;
      }
      
      .color-option {
        width: 30px;
        height: 30px;
      }
      
      .line-width-picker {
        gap: 11px;
      }
      
      .line-width-option {
        width: 26px;
        height: 26px;
      }
      
      .line-width-preview {
        width: 20px;
      }
      
      .instructions {
        font-size: 0.95rem;
        margin: 15px 0;
        padding: 11px;
      }
    }
    
    @media (max-width: 360px) {
      .draw-container {
        max-width: 100%;
      }
      
      .canvas-container {
        aspect-ratio: 4/3;
      }
      
      .color-option {
        width: 28px;
        height: 28px;
      }
      
      .line-width-option {
        width: 24px;
        height: 24px;
      }
    }
    
    /* Mobile touch optimizations for drawing */
    .color-option, .line-width-option, #clearBtn {
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }
  </style>
</head>
<body>

  <!-- Floating Hearts Background -->
  <div class="floating-hearts" id="floatingHearts"></div>

  <!-- Premium Header -->
  <div class="title-container">
    <div class="title-wrapper">
      <div class="title-content">
        <h1 class="homepage-title">üé® Draw Together</h1>
        <div class="distance-symbol">
          <div class="heart">‚ù§Ô∏è</div>
          <div class="dots">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
          </div>
          <div class="heart">‚ù§Ô∏è</div>
        </div>
        <p class="title-sub">Draw something special for each other on our shared canvas.</p>
      </div>
    </div>
  </div>

  <!-- Premium Draw Together Tile -->
  <div class="draw-container">
    <div class="countdown-container">
      <div class="birthday-icon">üé®</div>
      <div class="countdown-title">Create Something Beautiful</div>
      
      <p class="instructions">
        Use your finger or mouse to draw. Share your creation with each other!
      </p>
      
      <div class="canvas-container">
        <canvas id="drawingCanvas"></canvas>
      </div>
      
      <div class="draw-controls">
        <div class="color-picker">
          <div class="color-option selected" style="background-color: #e74c3c;" data-color="#e74c3c"></div>
          <div class="color-option" style="background-color: #3498db;" data-color="#3498db"></div>
          <div class="color-option" style="background-color: #2ecc71;" data-color="#2ecc71"></div>
          <div class="color-option" style="background-color: #f1c40f;" data-color="#f1c40f"></div>
          <div class="color-option" style="background-color: #9b59b6;" data-color="#9b59b6"></div>
          <div class="color-option" style="background-color: #1abc9c;" data-color="#1abc9c"></div>
          <div class="color-option" style="background-color: #34495e;" data-color="#34495e"></div>
          <div class="color-option" style="background-color: #000;" data-color="#000"></div>
        </div>
        
        <div class="line-width-picker">
          <div class="line-width-option selected" data-width="2">
            <div class="line-width-preview" style="width: 10px;"></div>
          </div>
          <div class="line-width-option" data-width="4">
            <div class="line-width-preview" style="width: 15px;"></div>
          </div>
          <div class="line-width-option" data-width="8">
            <div class="line-width-preview" style="width: 20px;"></div>
          </div>
          <div class="line-width-option" data-width="12">
            <div class="line-width-preview" style="width: 25px;"></div>
          </div>
        </div>
        
        <button class="action-btn" id="clearBtn">Clear Canvas üßπ</button>
      </div>
      
      <div class="gift-message">
        <h3>‚ù§Ô∏è Why This Matters</h3>
        <p>Draw something special for your loved one. This is your shared space to create memories together, no matter the distance.</p>
      </div>
    </div>
  </div>

  <!-- Back Button -->
  <a href="index.html" class="back-button">‚Üê Back to Home</a>

  <!-- Footer -->
  <div class="footer">
    Every stroke is a message of love. ‚ù§Ô∏è
  </div>

  <script>
    // Premium Mobile touch optimization
    document.addEventListener('DOMContentLoaded', function() {
      console.log("Premium Draw Together - DOM fully loaded");
      
      try {
        // Initialize premium floating hearts
        createPremiumFloatingHearts();
        console.log("Premium floating hearts initialized");
        
        // Initialize mobile-specific optimizations
        setupMobileOptimizations();
        console.log("Mobile optimizations setup completed");
        
        // Initialize drawing canvas
        setupPremiumDrawing();
        console.log("Premium drawing setup started");
        
        // Prevent accidental zooming on mobile
        document.addEventListener('touchmove', function(e) {
          if (e.scale !== 1) {
            e.preventDefault();
          }
        }, { passive: false });
      } catch (error) {
        console.error("Premium Error in DOMContentLoaded:", error);
      }
    });

    // Premium Floating Hearts
    function createPremiumFloatingHearts() {
      const heartsContainer = document.getElementById('floatingHearts') || document.body;
      
      // Create more hearts for premium effect
      for (let i = 0; i < 35; i++) {
        const heart = document.createElement('div');
        heart.className = 'floating-heart';
        heart.innerHTML = '‚ù§Ô∏è';
        
        // Random position
        heart.style.left = Math.random() * 100 + '%';
        
        // Random animation duration (slower for premium feel)
        const duration = Math.random() * 5 + 6;
        heart.style.animationDuration = duration + 's';
        
        // Random size with more variation
        const size = Math.random() * 10 + 12;
        heart.style.fontSize = size + 'px';
        
        // Random opacity for depth
        heart.style.opacity = (Math.random() * 0.3 + 0.4).toFixed(2);
        
        // Add subtle rotation for premium effect
        heart.style.transform = `rotate(${Math.random() * 360}deg)`;
        
        heartsContainer.appendChild(heart);
      }
      
      // Add premium animation keyframes
      const style = document.createElement('style');
      style.textContent = `
        @keyframes floatHeart {
          0% {
            transform: translateY(100vh) rotate(0deg) scale(0.9);
            opacity: 0;
          }
          8% {
            opacity: ${Math.random() * 0.3 + 0.5};
          }
          92% {
            opacity: ${Math.random() * 0.3 + 0.5};
          }
          100% {
            transform: translateY(-150px) rotate(${Math.random() * 360}deg) scale(1.2);
            opacity: 0;
          }
        }
      `;
      document.head.appendChild(style);
    }
    
    // Mobile-specific optimizations
    function setupMobileOptimizations() {
      // Add iOS specific adjustments
      if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
        document.body.style.paddingTop = window.innerHeight * 0.02 + 'px';
        
        // Prevent overscroll bounce
        document.body.addEventListener('touchmove', function(e) {
          if (e.target === document.body) e.preventDefault();
        }, { passive: false });
      }
      
      // Add Android specific optimizations
      if (/Android/i.test(navigator.userAgent)) {
        // Prevent accidental zoom
        document.addEventListener('touchmove', function(e) {
          if (e.scale !== 1) {
            e.preventDefault();
          }
        }, { passive: false });
      }
    }
    
    // Premium Drawing Setup
    function setupPremiumDrawing() {
      // Drawing setup
      const canvas = document.getElementById('drawingCanvas');
      const ctx = canvas.getContext('2d');
      
      // Set canvas size based on container
      function resizeCanvas() {
        const container = canvas.parentElement;
        canvas.width = container.clientWidth;
        canvas.height = container.clientHeight;
        
        // Clear canvas with white background
        ctx.fillStyle = 'white';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
      }
      
      // Initial resize
      resizeCanvas();
      
      // Resize on window resize
      window.addEventListener('resize', resizeCanvas);
      
      // Drawing variables
      let isDrawing = false;
      let lastX = 0;
      let lastY = 0;
      let currentColor = '#e74c3c';
      let lineWidth = 2;
      let touchStartX = 0;
      let touchStartY = 0;
      let touchMoved = false;
      
      // Haptic feedback function (mobile only)
      function triggerHapticFeedback() {
        if ('vibrate' in navigator) {
          navigator.vibrate(10); // Short vibration for mobile
        }
      }
      
      // Start drawing
      function startDrawing(e) {
        isDrawing = true;
        [lastX, lastY] = [e.offsetX, e.offsetY];
        
        // For touch events, prevent accidental scrolling
        if (e.type === 'touchstart') {
          touchStartX = e.touches[0].clientX;
          touchStartY = e.touches[0].clientY;
          touchMoved = false;
          e.preventDefault();
        }
      }
      
      // Move during drawing
      function moveDuringDrawing(e) {
        if (e.type === 'touchmove') {
          const currentX = e.touches[0].clientX;
          const currentY = e.touches[0].clientY;
          
          // Check if this is actual drawing movement or just scrolling
          const distance = Math.sqrt(
            Math.pow(currentX - touchStartX, 2) + 
            Math.pow(currentY - touchStartY, 2)
          );
          
          if (distance > 5) {
            touchMoved = true;
          }
          
          if (!touchMoved) {
            e.preventDefault();
            return;
          }
        }
      }
      
      // Draw
      function draw(e) {
        if (!isDrawing) return;
        
        e.preventDefault();
        
        // Get coordinates (works for both mouse and touch)
        let x, y;
        if (e.type.includes('touch')) {
          const rect = canvas.getBoundingClientRect();
          x = e.touches[0].clientX - rect.left;
          y = e.touches[0].clientY - rect.top;
        } else {
          x = e.offsetX;
          y = e.offsetY;
        }
        
        ctx.strokeStyle = currentColor;
        ctx.lineWidth = lineWidth;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
        
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(x, y);
        ctx.stroke();
        
        [lastX, lastY] = [x, y];
      }
      
      // Stop drawing
      function stopDrawing() {
        isDrawing = false;
        ctx.beginPath();
      }
      
      // Set color
      function setColor(color) {
        currentColor = color;
        document.querySelectorAll('.color-option').forEach(option => {
          option.classList.remove('selected');
        });
        event.target.classList.add('selected');
        
        // Premium visual feedback
        const colorOption = event.target;
        colorOption.style.transform = 'scale(1.3)';
        setTimeout(() => {
          colorOption.style.transform = 'scale(1.25)';
        }, 100);
        setTimeout(() => {
          colorOption.style.transform = '';
        }, 250);
        
        // Add vibration feedback
        triggerHapticFeedback();
      }
      
      // Set line width
      function setLineWidth(width) {
        lineWidth = width;
        document.querySelectorAll('.line-width-option').forEach(option => {
          option.classList.remove('selected');
        });
        event.target.classList.add('selected');
        
        // Premium visual feedback
        const widthOption = event.target;
        widthOption.style.transform = 'scale(1.3)';
        setTimeout(() => {
          widthOption.style.transform = 'scale(1.25)';
        }, 100);
        setTimeout(() => {
          widthOption.style.transform = '';
        }, 250);
        
        // Add vibration feedback
        triggerHapticFeedback();
      }
      
      // Clear canvas
      function clearCanvas() {
        ctx.fillStyle = 'white';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // Premium visual feedback
        const clearBtn = document.getElementById('clearBtn');
        clearBtn.style.transform = 'scale(0.95)';
        setTimeout(() => {
          clearBtn.style.transform = 'scale(1)';
        }, 200);
        
        // Add vibration feedback
        triggerHapticFeedback();
      }
      
      // Event listeners for desktop
      canvas.addEventListener('mousedown', startDrawing);
      canvas.addEventListener('mousemove', draw);
      canvas.addEventListener('mouseup', stopDrawing);
      canvas.addEventListener('mouseout', stopDrawing);
      
      // Event listeners for touch devices with mobile optimizations
      canvas.addEventListener('touchstart', startDrawing, { passive: false });
      canvas.addEventListener('touchmove', moveDuringDrawing, { passive: false });
      canvas.addEventListener('touchmove', draw, { passive: false });
      canvas.addEventListener('touchend', stopDrawing);
      
      // Color picker
      document.querySelectorAll('.color-option').forEach(option => {
        option.addEventListener('click', function() {
          setColor(this.getAttribute('data-color'));
        });
        
        // Mobile touch feedback
        option.addEventListener('touchstart', function(e) {
          e.preventDefault();
          this.style.transform = 'scale(1.3)';
          this.style.boxShadow = '0 5px 12px rgba(0, 0, 0, 0.15)';
        });
        
        option.addEventListener('touchend', function() {
          setTimeout(() => {
            this.style.transform = '';
            this.style.boxShadow = '0 3px 8px rgba(0, 0, 0, 0.1)';
          }, 200);
        });
      });
      
      // Line width picker
      document.querySelectorAll('.line-width-option').forEach(option => {
        option.addEventListener('click', function() {
          setLineWidth(parseInt(this.getAttribute('data-width')));
        });
        
        // Mobile touch feedback
        option.addEventListener('touchstart', function(e) {
          e.preventDefault();
          this.style.transform = 'scale(1.3)';
          this.style.boxShadow = '0 5px 12px rgba(0, 0, 0, 0.15)';
        });
        
        option.addEventListener('touchend', function() {
          setTimeout(() => {
            this.style.transform = '';
            this.style.boxShadow = '0 3px 8px rgba(0, 0, 0, 0.1)';
          }, 200);
        });
      });
      
      // Clear button
      document.getElementById('clearBtn').addEventListener('click', clearCanvas);
      
      // Mobile touch feedback for clear button
      document.getElementById('clearBtn').addEventListener('touchstart', function(e) {
        e.preventDefault();
        this.style.transform = 'scale(0.95)';
      });
      
      document.getElementById('clearBtn').addEventListener('touchend', function() {
        setTimeout(() => {
          this.style.transform = 'scale(1)';
        }, 200);
      });
    }
  </script>

</body>
</html>