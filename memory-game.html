<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0"/>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Memory Game - For My Princess</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Mobile-specific game styles */
    @media (max-width: 480px) {
      .game-container {
        max-width: 100%;
      }
      
      .game-header {
        margin-bottom: 22px;
      }
      
      .game-title {
        font-size: 2.1rem;
        margin-bottom: 10px;
      }
      
      .game-subtitle {
        font-size: 1.05rem;
      }
      
      .game-board {
        gap: 14px;
        margin: 18px 0;
      }
      
      .memory-card {
        height: 110px;
      }
      
      .card-front,
      .card-back {
        font-size: 2.6rem;
        padding: 4px;
      }
      
      .sweet-messages {
        padding: 22px;
        margin-top: 22px;
        border-radius: 16px;
      }
      
      .sweet-messages h3 {
        font-size: 1.45rem;
        margin-bottom: 14px;
      }
      
      .sweet-message {
        font-size: 1.05rem;
        min-height: 45px;
      }
      
      .game-controls {
        gap: 18px;
        margin: 22px 0;
      }
      
      .reset-btn {
        padding: 15px 26px;
        font-size: 1.1rem;
        border-radius: 30px;
      }
    }
    
    @media (max-width: 360px) {
      .game-title {
        font-size: 1.9rem;
      }
      
      .game-subtitle {
        font-size: 0.98rem;
      }
      
      .game-board {
        gap: 10px;
        margin: 15px 0;
      }
      
      .memory-card {
        height: 100px;
      }
      
      .card-front,
      .card-back {
        font-size: 2.3rem;
      }
      
      .sweet-messages {
        padding: 20px;
        margin-top: 20px;
        border-radius: 15px;
      }
      
      .sweet-messages h3 {
        font-size: 1.35rem;
      }
      
      .sweet-message {
        font-size: 0.98rem;
        min-height: 40px;
      }
      
      .reset-btn {
        padding: 14px 24px;
        font-size: 1.02rem;
        border-radius: 28px;
      }
    }
    
    /* Mobile touch optimizations for game */
    .memory-card {
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }
    
    .reset-btn {
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }
  </style>
</head>
<body>

  <!-- Floating Hearts Background -->
  <div class="floating-hearts" id="floatingHearts"></div>

  <!-- Premium Header -->
  <div class="title-container">
    <div class="title-wrapper">
      <div class="title-content">
        <h1 class="homepage-title">üéÆ Memory Game</h1>
        <div class="distance-symbol">
          <div class="heart">‚ù§Ô∏è</div>
          <div class="dots">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
          </div>
          <div class="heart">‚ù§Ô∏è</div>
        </div>
        <p class="title-sub">Find matching pairs and receive sweet messages from me.</p>
      </div>
    </div>
  </div>

  <!-- Premium Memory Game Section -->
  <div class="game-container">
    <div class="game-header">
      <h2 class="game-title">Romantic Memory Match</h2>
      <p class="game-subtitle">Flip cards to find matching pairs. Each match reveals a special message from me to you.</p>
    </div>
    
    <div class="game-board" id="gameBoard">
      <!-- Cards will be generated here -->
    </div>
    
    <div class="sweet-messages">
      <h3>üíå Sweet Message</h3>
      <div class="sweet-message" id="sweetMessage">Flip cards to find matching pairs and see my sweet messages...</div>
    </div>
    
    <div class="game-controls">
      <button class="reset-btn" id="resetBtn">Reset Game üîÑ</button>
    </div>
  </div>

  <!-- Back Button -->
  <a href="index.html" class="back-button">‚Üê Back to Home</a>

  <!-- Footer -->
  <div class="footer">
    Every match is a reminder of how much I love you. ‚ù§Ô∏è
  </div>

  <script>
    // Premium Mobile touch optimization
    document.addEventListener('DOMContentLoaded', function() {
      console.log("Premium Memory Game - DOM fully loaded");
      
      try {
        // Initialize premium floating hearts
        createPremiumFloatingHearts();
        console.log("Premium floating hearts initialized");
        
        // Initialize mobile-specific optimizations
        setupMobileOptimizations();
        console.log("Mobile optimizations setup completed");
        
        // Initialize memory game
        setupPremiumMemoryGame();
        console.log("Premium memory game setup started");
        
        // Prevent accidental zooming on mobile
        document.addEventListener('touchmove', function(e) {
          if (e.scale !== 1) {
            e.preventDefault();
          }
        }, { passive: false });
      } catch (error) {
        console.error("Premium Error in DOMContentLoaded:", error);
      }
    });

    // Premium Floating Hearts
    function createPremiumFloatingHearts() {
      const heartsContainer = document.getElementById('floatingHearts') || document.body;
      
      // Create more hearts for premium effect
      for (let i = 0; i < 35; i++) {
        const heart = document.createElement('div');
        heart.className = 'floating-heart';
        heart.innerHTML = '‚ù§Ô∏è';
        
        // Random position
        heart.style.left = Math.random() * 100 + '%';
        
        // Random animation duration (slower for premium feel)
        const duration = Math.random() * 5 + 6;
        heart.style.animationDuration = duration + 's';
        
        // Random size with more variation
        const size = Math.random() * 10 + 12;
        heart.style.fontSize = size + 'px';
        
        // Random opacity for depth
        heart.style.opacity = (Math.random() * 0.3 + 0.4).toFixed(2);
        
        // Add subtle rotation for premium effect
        heart.style.transform = `rotate(${Math.random() * 360}deg)`;
        
        heartsContainer.appendChild(heart);
      }
      
      // Add premium animation keyframes
      const style = document.createElement('style');
      style.textContent = `
        @keyframes floatHeart {
          0% {
            transform: translateY(100vh) rotate(0deg) scale(0.9);
            opacity: 0;
          }
          8% {
            opacity: ${Math.random() * 0.3 + 0.5};
          }
          92% {
            opacity: ${Math.random() * 0.3 + 0.5};
          }
          100% {
            transform: translateY(-150px) rotate(${Math.random() * 360}deg) scale(1.2);
            opacity: 0;
          }
        }
      `;
      document.head.appendChild(style);
    }
    
    // Mobile-specific optimizations
    function setupMobileOptimizations() {
      // Add iOS specific adjustments
      if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
        document.body.style.paddingTop = window.innerHeight * 0.02 + 'px';
        
        // Prevent overscroll bounce
        document.body.addEventListener('touchmove', function(e) {
          if (e.target === document.body) e.preventDefault();
        }, { passive: false });
      }
      
      // Add Android specific optimizations
      if (/Android/i.test(navigator.userAgent)) {
        // Prevent accidental zoom
        document.addEventListener('touchmove', function(e) {
          if (e.scale !== 1) {
            e.preventDefault();
          }
        }, { passive: false });
      }
    }
    
    // Premium Memory Game Setup
    function setupPremiumMemoryGame() {
      const gameBoard = document.getElementById('gameBoard');
      const sweetMessage = document.getElementById('sweetMessage');
      const resetBtn = document.getElementById('resetBtn');
      
      // Sweet messages for each match
      const sweetMessages = [
        "Every time I see your name pop up on my phone, my heart skips a beat. ‚ù§Ô∏è",
        "I miss you more than words can express, but I love you more than that. üíñ",
        "You're not just my girlfriend, you're my favorite hello and hardest goodbye. üíå",
        "I fall for you more with every message we exchange and every call we share. üíû",
        "You're worth every mile between us and all the waiting it takes to see you again. üíì",
        "You've shown me that love can thrive even when we can't be physically together. üíò",
        "I love how you make me feel connected even when we're thousands of miles apart. üíï",
        "You're the calm before my storm and the peace after it. My heart is yours forever. üíù",
        "Loving you is the easiest and most natural thing I've ever done. ‚ù§Ô∏è",
        "You're the reason I believe in soulmates as our connection feels written in the stars. üíñ",
        "With you I've found a love that feels like coming home after a long journey. üíå",
        "You're my today and all of my tomorrows. I'll love you forever. üíû"
      ];
      
      // Emoji pairs for the cards
      const cardEmojis = [
        'üíò', 'üíò',
        'üíù', 'üíù',
        'üíñ', 'üíñ',
        'üíó', 'üíó',
        'üíì', 'üíì',
        'üíû', 'üíû',
        'üíï', 'üíï',
        'üíü', 'üíü',
        'üíå', 'üíå',
        'üíã', 'üíã',
        'üåπ', 'üåπ',
        'üíû', 'üíû'
      ];
      
      let flippedCards = [];
      let lockBoard = false;
      let matchedPairs = 0;
      
      // Create the game board
      function createBoard() {
        // Clear the board
        gameBoard.innerHTML = '';
        
        // Shuffle the cards
        const shuffledEmojis = [...cardEmojis].sort(() => Math.random() - 0.5);
        
        // Create cards
        shuffledEmojis.forEach((emoji, index) => {
          const card = document.createElement('div');
          card.classList.add('memory-card');
          card.dataset.emoji = emoji;
          card.dataset.index = index;
          
          card.innerHTML = `
            <div class="card-inner">
              <div class="card-front">${emoji}</div>
              <div class="card-back">‚ùì</div>
            </div>
          `;
          
          card.addEventListener('click', flipCard);
          card.addEventListener('touchstart', handleTouchStart);
          card.addEventListener('touchend', handleTouchEnd);
          gameBoard.appendChild(card);
        });
        
        // Reset game state
        flippedCards = [];
        lockBoard = false;
        matchedPairs = 0;
        
        // Reset message
        sweetMessage.textContent = "Flip cards to find matching pairs and see my sweet messages...";
        sweetMessage.classList.remove('heart-icon');
      }
      
      // Touch start variables
      let touchStartX = 0;
      let touchStartY = 0;
      let touchMoved = false;
      
      // Handle touch start
      function handleTouchStart(e) {
        touchStartX = e.touches[0].clientX;
        touchStartY = e.touches[0].clientY;
        touchMoved = false;
      }
      
      // Handle touch end
      function handleTouchEnd(e) {
        // Check if this was a tap or a swipe
        const currentX = e.changedTouches[0].clientX;
        const currentY = e.changedTouches[0].clientY;
        
        const distance = Math.sqrt(
          Math.pow(currentX - touchStartX, 2) + 
          Math.pow(currentY - touchStartY, 2)
        );
        
        // If it was a tap (not a swipe), trigger the click
        if (distance < 10) {
          e.preventDefault();
          flipCard.call(this, e);
        }
      }
      
      // Flip a card
      function flipCard() {
        if (lockBoard) return;
        if (this.classList.contains('flipped') || this.classList.contains('matched')) return;
        
        // Premium visual feedback
        this.style.transform = 'scale(0.97)';
        setTimeout(() => {
          this.style.transform = '';
        }, 150);
        
        this.classList.add('flipped');
        
        // Add to flipped cards
        flippedCards.push(this);
        
        // Check for match
        if (flippedCards.length === 2) {
          lockBoard = true;
          checkForMatch();
        }
      }
      
      // Check if cards match
      function checkForMatch() {
        const isMatch = flippedCards[0].dataset.emoji === flippedCards[1].dataset.emoji;
        
        if (isMatch) {
          disableCards();
          showSweetMessage();
        } else {
          unflipCards();
        }
      }
      
      // Disable matched cards
      function disableCards() {
        flippedCards.forEach(card => {
          card.classList.add('matched');
          card.removeEventListener('click', flipCard);
          card.removeEventListener('touchstart', handleTouchStart);
          card.removeEventListener('touchend', handleTouchEnd);
        });
        
        flippedCards = [];
        lockBoard = false;
        
        // Check if game is complete
        matchedPairs++;
        if (matchedPairs === cardEmojis.length / 2) {
          setTimeout(() => {
            sweetMessage.textContent = "You've found all the matches! üéâ Thank you for playing my love. I hope these messages made you smile!";
            sweetMessage.classList.add('heart-icon');
          }, 500);
        }
      }
      
      // Unflip non-matching cards
      function unflipCards() {
        setTimeout(() => {
          flippedCards.forEach(card => {
            card.classList.remove('flipped');
          });
          resetBoard();
        }, 1000);
      }
      
      // Reset board state
      function resetBoard() {
        [flippedCards, lockBoard] = [[], false];
      }
      
      // Show sweet message for match
      function showSweetMessage() {
        // Get random message (cycling through the array)
        const messageIndex = (matchedPairs) % sweetMessages.length;
        const message = sweetMessages[messageIndex];
        
        // Add animation
        sweetMessage.style.opacity = '0';
        sweetMessage.style.transform = 'translateY(10px)';
        
        setTimeout(() => {
          sweetMessage.textContent = message;
          sweetMessage.classList.add('heart-icon');
          
          sweetMessage.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
          sweetMessage.style.opacity = '1';
          sweetMessage.style.transform = 'translateY(0)';
          
          // Add vibration feedback
          if ('vibrate' in navigator) {
            navigator.vibrate([10, 30, 10]);
          }
        }, 300);
      }
      
      // Reset the game
      function resetGame() {
        // Premium visual feedback
        resetBtn.style.transform = 'scale(0.95)';
        setTimeout(() => {
          resetBtn.style.transform = 'scale(1)';
        }, 200);
        
        createBoard();
        
        // Update button text temporarily
        const originalText = resetBtn.textContent;
        resetBtn.textContent = "Game Reset! üéÆ";
        
        setTimeout(() => {
          resetBtn.textContent = originalText;
        }, 1500);
        
        // Add vibration feedback
        if ('vibrate' in navigator) {
          navigator.vibrate(20);
        }
      }
      
      // Set up event listeners
      resetBtn.addEventListener('click', resetGame);
      
      // Mobile touch feedback for reset button
      resetBtn.addEventListener('touchstart', function(e) {
        e.preventDefault();
        this.style.transform = 'scale(0.95)';
      });
      
      resetBtn.addEventListener('touchend', function() {
        setTimeout(() => {
          this.style.transform = 'scale(1)';
        }, 200);
      });
      
      // Premium hover effects
      resetBtn.addEventListener('mouseenter', function() {
        this.style.boxShadow = '0 12px 30px rgba(155, 89, 182, 0.5)';
      });
      
      resetBtn.addEventListener('mouseleave', function() {
        this.style.boxShadow = '0 8px 20px rgba(155, 89, 182, 0.4)';
      });
      
      // Initialize the game
      createBoard();
    }
  </script>

</body>
</html>